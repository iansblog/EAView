{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "required": ["businessCapabilities"],
  "properties": {
    "businessCapabilities": {
      "type": "object",
      "patternProperties": {
        "^[a-zA-Z]+$": {
          "type": "object",
          "required": ["name", "description", "icon", "color", "children"],
          "properties": {
            "name": {
              "type": "string",
              "description": "Name of the business capability"
            },
            "description": {
              "type": "string",
              "description": "Description of the business capability"
            },
            "icon": {
              "type": "string",
              "pattern": "^fa-[a-zA-Z-]+$",
              "description": "Font Awesome icon class"
            },
            "color": {
              "type": "string",
              "pattern": "^#[0-9A-Fa-f]{6}$",
              "description": "Hex color code"
            },
            "children": {
              "type": "array",
              "items": {
                "type": "object",
                "required": ["name", "description", "icon", "color", "systems"],
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "Name of the child capability"
                  },
                  "description": {
                    "type": "string",
                    "description": "Description of the child capability"
                  },
                  "icon": {
                    "type": "string",
                    "pattern": "^fa-[a-zA-Z-]+$",
                    "description": "Font Awesome icon class"
                  },
                  "color": {
                    "type": "string",
                    "pattern": "^#[0-9A-Fa-f]{6}$",
                    "description": "Hex color code"
                  },
                  "systems": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "required": ["name"],
                      "properties": {
                        "name": {
                          "type": "string",
                          "description": "Name of the system"
                        },
                        "description": {
                          "type": "string",
                          "description": "Description of the system"
                        },
                        "technology": {
                          "type": "string",
                          "description": "Technology used in the system"
                        },
                        "status": {
                          "type": "string",
                          "enum": ["Production", "Proposed", "Development"],
                          "description": "Current status of the system"
                        },
                        "country": {
                          "type": "string",
                          "pattern": "^[a-z]{2}$",
                          "description": "Two-letter country code"
                        },
                        "contractStartDate": {
                          "type": "string",
                          "format": "date",
                          "description": "Start date of the contract (YYYY-MM-DD)"
                        },
                        "contractEndDate": {
                          "type": "string",
                          "format": "date",
                          "description": "End date of the contract (YYYY-MM-DD)"
                        },
                        "criticality": {
                          "type": "string",
                          "enum": ["Critical", "High", "Medium", "Low"],
                          "description": "Criticality level of the system"
                        },
                        "owner": {
                          "type": "string",
                          "description": "Team/department owning the system"
                        },
                        "supportLevel": {
                          "type": "string",
                          "enum": ["Platinum", "Gold", "Silver", "TBD"],
                          "description": "Level of support provided"
                        },
                        "deploymentType": {
                          "type": "string",
                          "enum": ["Cloud", "SaaS", "Hybrid", "SaaS/Internal"],
                          "description": "Type of system deployment"
                        },
                        "annualCost": {
                          "type": "string",
                          "pattern": "^\\$[0-9,]+$",
                          "description": "Annual cost in USD"
                        },
                        "dataClassification": {
                          "type": "string",
                          "enum": ["Public", "Internal", "Confidential", "Sensitive"],
                          "description": "Classification level of the data"
                        },
                        "integrates": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          },
                          "description": "List of systems this system integrates with"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
