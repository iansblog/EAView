{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "required": ["metadata", "businessCapabilities", "dataEntities", "systems", "platforms", "deliveryPrograms"],
  "properties": {
    "metadata": {
      "type": "object",
      "required": ["name", "description", "version", "lastUpdated"],
      "properties": {
        "name": {
          "type": "string",
          "description": "Name of the Enterprise Architecture Catalog"
        },
        "description": {
          "type": "string",
          "description": "Description of the EA Catalog's purpose and scope"
        },
        "version": {
          "type": "string",
          "pattern": "^\\d+\\.\\d+\\.\\d+$",
          "description": "Semantic version number of the EA catalog"
        },
        "lastUpdated": {
          "type": "string",
          "format": "date-time",
          "description": "Timestamp of the last update to the catalog"
        },        "organisation": {
          "type": "object",
          "properties": {
            "name": {
              "type": "string",
              "description": "Name of the organisation"
            },
            "division": {
              "type": "string",
              "description": "Division or business unit"
            },
            "region": {
              "type": "string",
              "description": "Primary geographical region"
            }
          }
        },
        "contact": {
          "type": "object",
          "properties": {
            "primaryArchitect": {
              "type": "string",
              "description": "Name of the primary enterprise architect"
            },
            "email": {
              "type": "string",
              "format": "email",
              "description": "Contact email for EA team"
            },
            "team": {
              "type": "string",
              "description": "Name of the EA team"
            }
          }
        },
        "governance": {
          "type": "object",
          "properties": {
            "reviewCycle": {
              "type": "string",
              "enum": ["Monthly", "Quarterly", "Biannual", "Annual"],
              "description": "Frequency of EA catalog review"
            },
            "nextReviewDate": {
              "type": "string",
              "format": "date",
              "description": "Date of next scheduled review"
            },
            "approvers": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "List of people who approve changes"
            }
          }
        },
        "framework": {
          "type": "object",
          "properties": {
            "name": {
              "type": "string",
              "description": "Name of the EA framework being used"
            },
            "version": {
              "type": "string",
              "description": "Version of the framework"
            },            "customisations": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "List of customisations made to the standard framework"
            }
          }
        },
        "tags": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Categorisation tags for the EA catalog"
        }
      }
    },
    "businessCapabilities": {
      "type": "object",
      "description": "Collection of business capabilities with hierarchical structure",
      "patternProperties": {
        "^[a-zA-Z0-9_]+$": {
          "type": "object",
          "required": ["name", "description", "icon", "color"],
          "properties": {
            "name": {
              "type": "string",
              "description": "Name of the business capability"
            },
            "description": {
              "type": "string",
              "description": "Description of the business capability"
            },
            "icon": {
              "type": "string",
              "pattern": "^fa-[a-zA-Z-]+$",
              "description": "Font Awesome icon class"
            },
            "color": {
              "type": "string",
              "pattern": "^#[0-9A-Fa-f]{6}$",
              "description": "Hex color code"
            },
            "parentId": {
              "type": "string",
              "description": "ID of the parent capability (if any)"
            },
            "childrenIds": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "IDs of child capabilities"
            },
            "systemIds": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "IDs of systems supporting this capability"
            }
          }
        }
      }
    },
    "dataEntities": {
      "type": "object",
      "description": "Collection of data entities and their relationships",
      "patternProperties": {
        "^[a-zA-Z0-9_]+$": {
          "type": "object",
          "required": ["name", "description", "classification"],
          "properties": {
            "name": {
              "type": "string",
              "description": "Name of the data entity"
            },
            "description": {
              "type": "string",
              "description": "Description of the data entity"
            },
            "classification": {
              "type": "string",
              "enum": ["Public", "Internal", "Confidential", "Sensitive"],
              "description": "Data classification level"
            },
            "groupId": {
              "type": "string",
              "description": "ID of the group this entity belongs to"
            },
            "attributes": {
              "type": "array",
              "items": {
                "type": "object",
                "required": ["name", "type"],
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "Name of the attribute"
                  },
                  "type": {
                    "type": "string",
                    "description": "Data type of the attribute"
                  },
                  "description": {
                    "type": "string",
                    "description": "Description of the attribute"
                  }
                }
              }
            },            "relationships": {
              "type": "array",
              "items": {
                "type": "object",
                "required": ["targetEntityId", "type"],
                "properties": {
                  "targetEntityId": {
                    "type": "string",
                    "description": "ID of the related entity"
                  },
                  "type": {
                    "type": "string",
                    "enum": ["OneToOne", "OneToMany", "ManyToOne", "ManyToMany"],
                    "description": "Type of relationship"
                  },
                  "description": {
                    "type": "string",
                    "description": "Description of the relationship"
                  }
                }
              }
            },
            "icon": {
              "type": "string",
              "pattern": "^fa-[a-zA-Z-]+$",
              "description": "Font Awesome icon class"
            },
            "color": {
              "type": "string",
              "pattern": "^#[0-9A-Fa-f]{6}$",
              "description": "Hex color code"
            }
          }
        }
      }
    },
    "systems": {
      "type": "object",
      "description": "Collection of systems in the enterprise",
      "patternProperties": {
        "^[a-zA-Z0-9_]+$": {
          "type": "object",
          "required": ["name", "description", "status"],
          "properties": {
            "name": {
              "type": "string",
              "description": "Name of the system"
            },
            "description": {
              "type": "string",
              "description": "Description of the system"
            },
            "technology": {
              "type": "string",
              "description": "Technology used in the system"
            },
            "supplier": {
              "type": "object",
              "properties": {
                "name": {
                  "type": "string",
                  "description": "Name of the supplier"
                },
                "reseller": {
                  "type": "string",
                  "description": "Name of the reseller if applicable"
                },
                "contactDetails": {
                  "type": "object",
                  "properties": {
                    "supportEmail": {
                      "type": "string",
                      "format": "email"
                    },
                    "supportPhone": {
                      "type": "string"
                    },
                    "accountManager": {
                      "type": "string"
                    }
                  }
                }
              }
            },
            "status": {
              "type": "string",
              "enum": ["Ideation", "Planning", "Development", "Production", "Retirement"],
              "description": "Current status of the system"
            },
            "costs": {
              "type": "object",
              "properties": {                "isCentralised": {
                  "type": "boolean",
                  "description": "Whether the cost is centralised"
                },
                "fundingCountry": {
                  "type": "string",
                  "pattern": "^[A-Z]{2}$",
                  "description": "Country code responsible for funding"
                },
                "annualCost": {
                  "type": "string",
                  "pattern": "^\\$[0-9,]+$",
                  "description": "Annual cost in USD"
                },
                "costBreakdown": {
                  "type": "object",
                  "description": "Breakdown of costs by category",
                  "additionalProperties": {
                    "type": "number"
                  }
                }
              }
            },
            "usage": {
              "type": "array",
              "items": {
                "type": "object",
                "required": ["country", "userCount"],
                "properties": {
                  "country": {
                    "type": "string",
                    "pattern": "^[A-Z]{2}$",
                    "description": "Country code"
                  },
                  "userCount": {
                    "type": "integer",
                    "description": "Number of users in the country"
                  }
                }
              }
            },
            "contracts": {
              "type": "array",
              "items": {
                "type": "object",
                "required": ["startDate", "endDate"],
                "properties": {
                  "startDate": {
                    "type": "string",
                    "format": "date"
                  },
                  "endDate": {
                    "type": "string",
                    "format": "date"
                  },
                  "value": {
                    "type": "string",
                    "pattern": "^\\$[0-9,]+$"
                  },
                  "renewalTerms": {
                    "type": "string"
                  }
                }
              }
            },
            "criticality": {
              "type": "string",
              "enum": ["Critical", "High", "Medium", "Low"],
              "description": "Criticality level of the system"
            },
            "owner": {
              "type": "string",
              "description": "Team/department owning the system"
            },
            "supportLevel": {
              "type": "string",
              "enum": ["Platinum", "Gold", "Silver", "Bronze", "TBD"],
              "description": "Level of support provided"
            },
            "deploymentType": {
              "type": "string",
              "enum": ["Cloud", "SaaS", "OnPremise", "Hybrid", "EdgeComputing"],
              "description": "Type of system deployment"
            },
            "dataEntities": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "IDs of data entities used by this system"
            },
            "platformId": {
              "type": "string",
              "description": "ID of the platform this system belongs to"
            },
            "deliveryProgramId": {
              "type": "string",
              "description": "ID of the delivery program this system is part of"
            }
          }
        }
      }
    },
    "platforms": {
      "type": "object",
      "description": "Collection of delivery platforms",
      "patternProperties": {
        "^[a-zA-Z0-9_]+$": {
          "type": "object",
          "required": ["name", "description"],
          "properties": {
            "name": {
              "type": "string",
              "description": "Name of the platform"
            },
            "description": {
              "type": "string",
              "description": "Description of the platform"
            },
            "category": {
              "type": "string",
              "enum": ["ApplicationPlatform", "IntegrationPlatform", "DataPlatform", "SecurityPlatform", "InfrastructurePlatform"],
              "description": "Category of the platform"
            },
            "vendor": {
              "type": "string",
              "description": "Platform vendor"
            },
            "systemIds": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "IDs of systems running on this platform"
            }
          }
        }
      }
    },
    "deliveryPrograms": {
      "type": "object",
      "description": "Collection of delivery programs",
      "patternProperties": {
        "^[a-zA-Z0-9_]+$": {
          "type": "object",
          "required": ["name", "description", "status"],
          "properties": {
            "name": {
              "type": "string",
              "description": "Name of the program"
            },
            "description": {
              "type": "string",
              "description": "Description of the program"
            },
            "status": {
              "type": "string",
              "enum": ["Ideation", "Planning", "Delivery", "Support", "Completed"],
              "description": "Current status of the program"
            },
            "startDate": {
              "type": "string",
              "format": "date",
              "description": "Program start date"
            },
            "endDate": {
              "type": "string",
              "format": "date",
              "description": "Program end date"
            },
            "budget": {
              "type": "string",
              "pattern": "^\\$[0-9,]+$",
              "description": "Program budget"
            },
            "sponsor": {
              "type": "string",
              "description": "Program sponsor"
            },
            "systemIds": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "IDs of systems included in this program"
            },
            "milestones": {
              "type": "array",
              "items": {
                "type": "object",
                "required": ["name", "date"],
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "Milestone name"
                  },
                  "date": {
                    "type": "string",
                    "format": "date",
                    "description": "Milestone date"
                  },
                  "description": {
                    "type": "string",
                    "description": "Milestone description"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
