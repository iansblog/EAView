{
  "mapping": {
    "businessCapabilities": {
      "source": "businessCapabilities",
      "transformations": {
        "propertyMapping": {
          "name": "name",
          "description": "description",
          "icon": "icon",
          "color": "color"
        },
        "relationships": {
          "childrenIds": "children[].name",
          "systemIds": "children[].systems[].name"
        },
        "hierarchy": {
          "type": "flattened",
          "parentIdGeneration": "from_path",
          "idFormat": "{capability}_{subcapability}"
        }
      }
    },
    "systems": {
      "source": "businessCapabilities..systems[]",
      "transformations": {
        "propertyMapping": {
          "name": "name",
          "description": "description",
          "technology": "technology",
          "status": "status",
          "criticality": "criticality",
          "owner": "owner",
          "supportLevel": "supportLevel",
          "deploymentType": "deploymentType",
          "dataEntities": "integrates[]"
        },
        "supplier": {
          "transform": "extract_supplier_info",
          "source": ["technology"]
        },
        "platformId": {
          "transform": "derive_platform_from_technology",
          "source": "technology"
        },
        "deliveryProgramId": {
          "transform": "derive_program_from_status",
          "source": "status"
        },
        "costs": {
          "annualCost": "annualCost",
          "fundingCountry": "country",
          "isCentralised": {
            "default": false
          },
          "costBreakdown": {
            "source": "annualCost",
            "transform": "parse_cost_breakdown"
          }
        },
        "usage": {
          "source": "country",
          "transform": "to_usage_array"
        },
        "contracts": {
          "source": ["contractStartDate", "contractEndDate"],
          "transform": "to_contract_object"
        }
      }
    },    "dataEntities": {
      "source": "businessCapabilities..systems[].integrates[]",
      "transformations": {
        "propertyMapping": {
          "name": ".",
          "description": "extract_description_from_system_context",
          "classification": {
            "source": "parent.dataClassification",
            "default": "Internal"
          }
        },
        "relationships": {
          "transform": "create_entity_relationships",
          "source": ["name", "parent.integrates[]"]
        },
        "groupId": {
          "transform": "derive_group_from_context",
          "source": "parent.technology"
        }
      }
    },    "platforms": {
      "source": "businessCapabilities..systems[].technology",
      "transformations": {
        "propertyMapping": {
          "name": "derive_platform_name",
          "description": "derive_platform_description",
          "category": "derive_platform_category",
          "vendor": "extract_vendor_from_technology"
        },
        "systemIds": {
          "transform": "collect_systems_by_technology",
          "source": [".", "parent"]
        }
      }
    },
    "deliveryPrograms": {
      "source": "status",
      "transformations": {
        "grouping": "by_status",
        "status_mapping": {
          "Proposed": "Planning",
          "Production": "Support",
          "Development": "Delivery"
        }
      }
    }
  },
  "migrationSteps": [
    {
      "step": 1,
      "description": "Extract and transform business capabilities",
      "action": "Flatten hierarchy and generate unique IDs"
    },
    {
      "step": 2,
      "description": "Transform systems",
      "action": "Extract system details and create relationships"
    },
    {
      "step": 3,
      "description": "Create data entities",
      "action": "Analyze integrations and create data entity catalog"
    },
    {
      "step": 4,
      "description": "Define platforms",
      "action": "Group systems by technology and create platform definitions"
    },
    {
      "step": 5,
      "description": "Create delivery programs",
      "action": "Group systems by status and create program structure"
    }
  ],
  "notes": {
    "idGeneration": "Use consistent ID format: lowercase, underscore separated, include parent context where relevant",
    "dataClassification": "Preserve existing classification levels",
    "relationships": "Create bi-directional references where appropriate",
    "validation": "Ensure all referenced IDs exist in their respective collections"
  }
}
