{
  "mapping": {
    "businessCapabilities": {
      "source": "businessCapabilities",
      "preserveStructure": true,
      "transformations": {
        "propertyMapping": {
          "name": "name",
          "description": "description",
          "icon": "icon",
          "color": "color"
        },
        "children": {
          "source": "children",
          "preserveStructure": true,
          "transformations": {
            "propertyMapping": {
              "name": "name",
              "description": "description",
              "icon": "icon",
              "color": "color"
            },
            "systems": {
              "source": "systems",
              "generateIds": true,
              "idFormat": "{capability}_{system_name}",
              "createReferences": true
            }
          }
        }
      }
    },    "systems": {
      "source": "businessCapabilities..systems[]",
      "generateId": true,
      "idFormat": "{capability}_{name}",
      "transformations": {
        "propertyMapping": {
          "name": "name",
          "description": "description",
          "technology": "technology",
          "status": "status",
          "criticality": "criticality",
          "owner": "owner",
          "supportLevel": "supportLevel",
          "deploymentType": "deploymentType",
          "dataEntities": {
            "source": "integrates[]",
            "transform": "normalize_entity_names"
          }
        },
        "supplier": {
          "transform": "extract_supplier_info",
          "source": ["technology"]
        },
        "platformId": {
          "transform": "derive_platform_from_technology",
          "source": "technology"
        },
        "deliveryProgramId": {
          "transform": "derive_program_from_status",
          "source": "status"
        },
        "costs": {
          "annualCost": "annualCost",
          "fundingCountry": "country",
          "isCentralised": {
            "default": false
          },
          "costBreakdown": {
            "source": "annualCost",
            "transform": "parse_cost_breakdown"
          }
        },
        "usage": {
          "source": "country",
          "transform": "to_usage_array"
        },
        "contracts": {
          "source": ["contractStartDate", "contractEndDate"],
          "transform": "to_contract_object"
        }
      }
    },    "dataEntities": {
      "source": "businessCapabilities..systems[].integrates[]",
      "deduplicateEntities": true,
      "transformations": {
        "propertyMapping": {
          "name": ".",
          "description": "extract_description_from_systems",
          "classification": {
            "source": "parent.dataClassification",
            "default": "Internal"
          },
          "attributes": {
            "source": "parent.dataAttributes",
            "optional": true
          }
        },
        "relationships": {
          "transform": "create_bidirectional_relationships",
          "source": ["name", "parent.integrates[]", "parent.name"],
          "createImpliedRelationships": true
        },
        "groupId": {
          "transform": "derive_domain_group",
          "source": ["parent.technology", "parent.owner"]
        }
      }
    },    "platforms": {
      "source": "businessCapabilities..systems[].technology",
      "deduplicatePlatforms": true,
      "transformations": {
        "propertyMapping": {
          "name": "derive_normalized_platform_name",
          "description": "generate_platform_description",
          "category": {
            "transform": "categorize_platform",
            "mapping": {
              "Azure.*": "ApplicationPlatform",
              "SAP": "IntegrationPlatform",
              "Microsoft.*": "ApplicationPlatform",
              "Custom.*": "ApplicationPlatform",
              ".*Dynamics.*": "ApplicationPlatform",
              "Power BI": "DataPlatform",
              "Fixflo": "ApplicationPlatform",
              "DocuSign": "ApplicationPlatform",
              "SharePoint": "IntegrationPlatform"
            },
            "default": "ApplicationPlatform"
          },
          "vendor": {
            "transform": "extract_vendor",
            "mapping": {
              "Azure.*": "Microsoft",
              "Microsoft.*": "Microsoft",
              "SAP": "SAP",
              "Power BI": "Microsoft",
              "Fixflo": "Fixflo",
              "DocuSign": "DocuSign",
              "SharePoint": "Microsoft",
              "Custom.*": "Knight Frank"
            }
          }
        },
        "systemIds": {
          "transform": "collect_systems_by_platform",
          "source": [".", "parent"],
          "groupSimilar": true
        }
      }
    },    "deliveryPrograms": {
      "source": "businessCapabilities..systems[]",
      "transformations": {
        "groupByStatus": true,
        "propertyMapping": {
          "name": "derive_program_name",
          "description": "generate_program_description",
          "status": {
            "source": "status",
            "mapping": {
              "Proposed": "Planning",
              "Production": "Support",
              "Development": "Delivery"
            }
          },
          "startDate": {
            "source": "contractStartDate",
            "fallback": "2025-06-07"
          },
          "endDate": {
            "source": "contractEndDate",
            "required": true
          },
          "budget": {
            "source": "annualCost",
            "transform": "calculate_program_budget"
          },
          "sponsor": {
            "source": "owner",
            "transform": "derive_sponsor"
          }
        },
        "systemIds": {
          "source": "name",
          "transform": "create_system_references"
        },
        "milestones": {
          "transform": "generate_program_milestones",
          "source": ["status", "contractStartDate", "contractEndDate"]
        }
      }
    }
  },
  "migrationSteps": [
    {
      "step": 1,
      "description": "Extract and transform business capabilities",
      "action": "Flatten hierarchy and generate unique IDs"
    },
    {
      "step": 2,
      "description": "Transform systems",
      "action": "Extract system details and create relationships"
    },
    {
      "step": 3,
      "description": "Create data entities",
      "action": "Analyze integrations and create data entity catalog"
    },
    {
      "step": 4,
      "description": "Define platforms",
      "action": "Group systems by technology and create platform definitions"
    },
    {
      "step": 5,
      "description": "Create delivery programs",
      "action": "Group systems by status and create program structure"
    }
  ],
  "notes": {
    "idGeneration": "Use consistent ID format: lowercase, underscore separated, include parent context where relevant",
    "dataClassification": "Preserve existing classification levels",
    "relationships": "Create bi-directional references where appropriate",
    "validation": "Ensure all referenced IDs exist in their respective collections"
  }
}
